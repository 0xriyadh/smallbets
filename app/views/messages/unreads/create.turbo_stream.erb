<%= turbo_stream.remove "unread_separator" %>
<%= turbo_stream.replace dom_id(@message), partial: "messages/message", locals: { message: @message, first_unread_message: @message, current_room: @room } %>
<% if @membership.room.direct? %>
  <%= turbo_stream.replace dom_id(@membership.room, :list), partial: "users/sidebars/rooms/direct", locals: { membership: @membership } %>
<% else %>
  <%= turbo_stream.replace dom_id(@membership.root_membership.room, :list_node), partial: "users/sidebars/rooms/shared_with_threads", locals: { membership: @membership.root_membership, thread_memberships: @thread_memberships } %>
<% end %>